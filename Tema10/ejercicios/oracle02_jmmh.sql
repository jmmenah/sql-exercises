-- Juan Manuel Mena Hern√°ndez

-- Ejercicio 1

UPDATE CATEGORIA SET NOMBRE=UPPER(NOMBRE);
UPDATE PRODUCTO SET NOMBRE=UPPER(NOMBRE);
UPDATE PRODUCTO SET FABRICANTE=UPPER(FABRICANTE);

-- Ejercicio 2

ALTER TABLE CATEGORIA ADD CONSTRAINT CH_NOMBRE CHECK(NOMBRE=UPPER(NOMBRE));
ALTER TABLE PRODUCTO ADD CONSTRAINT CH_NOMBRE CHECK(NOMBRE=UPPER(NOMBRE));
ALTER TABLE PRODUCTO ADD CONSTRAINT CH_FABRICANTE CHECK(FABRICANTE=UPPER(FABRICANTE));
ALTER TABLE PRODUCTO ADD CONSTRAINT CH_NOMBREP CHECK(NOMBRE=UPPER(NOMBRE));
ALTER TABLE PRODUCTO SET NOMBRE=UPPER.NOMBRE && FABRICANTE=FABRICANTE.UPPER;

-- Ejercicio 3

ALTER TABLE CATEGORIA ADD IVA NUMBER(2,0) DEFAULT 4;

-- Ejercicio 4

UPDATE CATEGORIA SET IVA=5 WHERE NOMBRE=GEL OR NOMBRE='CREMA';
UPDATE CATEGORIA SET IVA=6 WHERE NOMBRE LIKE 'COMPRIMIDO';
UPDATE CATEGORIA SET IVA=5 WHERE NOMBRE='GEL' OR NOMBRE='CREMA';
UPDATE CATEGORIA SET IVA=6 WHERE NOMBRE='COMPRIMIDO' OR NOMBRE='COMPRIMIDO EFERVESCENTE';

-- Ejercicio 5

COMMIT WORK;

-- Ejercicio 6

INSERT INTO CATEGORIA VALUES (6,'HIDROGEL',DEFAULT);

-- Ejercicio 7

ROLLBACK WORK;

-- Ejercicio 8

CREATE TABLE PROVEEDOR (
   DNI VARCHAR2(9) NOT NULL,
   NOMBRE VARCHAR2(150) NOT NULL UNIQUE,
   TELEFONO VARCHAR(9) NOT NULL,
   CORREO VARCHAR2(75) NOT NULL,
   COMISION NUMBER(2,0) DEFAULT 4,
   PRIMARY KEY(DNI),
   CONSTRAINT CH_DNI CHECK (DNI=UPPER(DNI)),
   CONSTRAINT CH_NOMBREPV CHECK (NOMBRE=UPPER(NOMBRE)),
   CONSTRAINT CH_CORREO CHECK (CORREO=UPPER(CORREO))
   );

-- Ejercicio 9

INSERT INTO PROVEEDOR VALUES('11111111A','SAFARMA','692111222','VENTAS@SAFARMA.ES',6);
INSERT INTO PROVEEDOR VALUES('22222222B','REFARM','596222111','CONTACTO@REFARM.ES',5);
INSERT INTO PROVEEDOR VALUES('33333333C','MULTIFAR','795333111','COMERCIO@MULTIFAR.COM',DEFAULT);

-- Ejercicio 10

ALTER SESSION SET NLS_DATE_FORMAT = 'DD-MON-YYYY';
ALTER SESSION SET NLS_DATE_LANGUAGE = 'SPANISH';

-- Ejercicio 11

CREATE TABLE COMPRA (
    ID_PRODUCTO NUMBER(11),
    DNI VARCHAR2(9),
    FECHA_COMPRA DATE DEFAULT SYSDATE,
    CONSTRAINT COMPRA_PK PRIMARY KEY (DNI,ID_PRODUCTO),
    CONSTRAINT PRODUCTO_FK FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO(ID_PRODUCTO),
    CONSTRAINT PROVEEDOR_FK FOREIGN KEY (DNI) REFERENCES PROVEEDOR(DNI)
    );

-- Ejercicio 12

INSERT INTO COMPRA VALUES(1,'11111111A',TO_DATE('13-02-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(2,'11111111A',TO_DATE('13-02-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(3,'11111111A',TO_DATE('13-02-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(5,'11111111A',TO_DATE('13-02-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(7,'11111111A',TO_DATE('13-02-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(2,'22222222B',TO_DATE('14-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(3,'22222222B',TO_DATE('14-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(6,'22222222B',TO_DATE('14-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(8,'22222222B',TO_DATE('14-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(9,'22222222B',TO_DATE('14-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(11,'22222222B',TO_DATE('14-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(1,'33333333C',TO_DATE('27-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(2,'33333333C',TO_DATE('27-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(10,'33333333C',TO_DATE('27-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(12,'33333333C',TO_DATE('27-03-2020', 'DD/MM/YYYY'));
INSERT INTO COMPRA VALUES(13,'33333333C',TO_DATE('27-03-2020', 'DD/MM/YYYY'));

-- Ejercicio 13

COMMIT WORK;


